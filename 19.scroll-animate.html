<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scroll Animation</title>
    <style>
      .card-background {
        background-color: lightgreen;
        height: 3000px;
        margin-top: 800px;
        margin-bottom: 1600px;
      }
      .card-box img {
        display: block;
        margin: auto;
        width: 85%;
      }
      .card-box {
        margin-bottom: 15px;
        position: sticky;
        top: 100px;
        opacity: 1;
        scale: 1;
      }
    </style>
  </head>
  <body>
    <!-- 스크롤 위치에 따라 변하는 애니메이션 : apple music ui -->
    <div class="card-background">
      <div class="card-box">
        <img src="./img/card1.png" alt="card1" />
      </div>
      <div class="card-box">
        <img src="./img/card2.png" alt="card2" />
      </div>
      <div class="card-box">
        <img src="./img/card3.png" alt="card3" />
      </div>
    </div>
    <script>
      // window는 viewport를 의미
      // 화면이 스크롤 될때마다 내부 코드를 실행하라
      $(window).scroll(() => {
        console.log(scrollY); // 720-> 940 960 -> 1185
        var scrHei = $(window).scrollTop();
        console.log(scrHei); // scrollY 랑 같은 값 나옴

        // 1st card
        let scrollCnt = -0.004545 * scrollY + 4.7727;
        $('.card-box').eq(0).css('opacity', scrollCnt);
        let scrollScale = -0.001 * scrollY + 1.72;
        if (scrollScale < 1) {
          $('.card-box').eq(0).css('transform', `scale(${scrollScale})`);
        }
        // 2nd card
        let scrollCnt2 = -(1 / 225) * scrollY + 6;
        $('.card-box').eq(1).css('opacity', scrollCnt2);
        let scrollScale2 = -0.0008 * scrollY + 1.85;
        if (scrollScale2 < 1) {
          $('.card-box').eq(1).css('transform', `scale(${scrollScale2})`);
        }
      });
    </script>
  </body>
</html>
